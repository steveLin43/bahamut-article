var topBarType="",topBarClass="";function NOTIFY_follow(e,c,m){var s=new Date,o=(1+m)%2;jQuery.ajax({url:"https://api.gamer.com.tw/ajax/common/home_follow_set.php",data:{at:e,fid:c,at_v:o,time:s.getTime()},method:"POST",xhrFields:{withCredentials:!0}}).done(function(h){var u=h.getElementsByTagName("errMsg");if(u.length)alert(u[0].firstChild.nodeValue);else if(h.getElementsByTagName("fin")[0].firstChild.nodeValue==="success"){e==1&&(f_title="\u54C8\u5566\u5340\u767C\u8868"),e==2&&(f_title="\u5275\u4F5C"),e==3&&(f_title="\u63A8\u85A6"),e==5&&(f_title="\u5BE6\u6CC1"),e==4?f_alt=o==1?"\u505C\u6B62\u6B64\u4F5C\u54C1\u6240\u6709\u8A0A\u606F":"\u6062\u5FA9\u6B64\u4F5C\u54C1\u6240\u6709\u8A0A\u606F":f_alt=o==1?"\u53D6\u6D88\u8A02\u95B1\u4ED6\u7684"+f_title:"\u8A02\u95B1\u4ED6\u7684"+f_title;var i=jQuery('[name="follow_'+e+"_"+c+'"]'),a=jQuery('[name="follow2_'+e+"_"+c+'"]'),p=jQuery('.list-item-box [name="follow_'+e+"_"+c+'"]'),r=jQuery('.list-item-box [name="follow2_'+e+"_"+c+'"]'),n;o==1?(n="on",i.parent("div").removeClass("is-disabled"),a.parent("div").removeClass("is-disabled")):(n="off",i.parent("div").addClass("is-disabled"),a.parent("div").addClass("is-disabled")),i.attr("href","javascript:NOTIFY_follow('"+e+"', '"+c+"', "+o+")").html('<img src="https://i2.bahamut.com.tw/rss-'+n+'.svg" title="'+f_alt+'" />'),a.attr("href","javascript:NOTIFY_follow('"+e+"', '"+c+"', "+o+")").html('<img src="https://i2.bahamut.com.tw/rss-'+n+'.svg" style="width:16px;" title="'+f_alt+'" />'),(p.length!=0||r.length!=0)&&(p.html('<img src="https://i2.bahamut.com.tw/rss-'+n+'.svg" style="width:16px;" title="'+f_alt+'"/>'+f_alt),r.html('<img src="https://i2.bahamut.com.tw/rss-'+n+'.svg" style="width:16px;" title="'+f_alt+'"/>'+f_alt))}})}(function(e,c,m){"use strict";var s={onoff:function(o,h,u,i){if(i=i||"",i){if(e(u).attr("data-switch")!=1)return Dialogify.alert("\u5DF2\u79FB\u9664\u6A19\u8A18!"),!1;var a="https://api.gamer.com.tw/ajax/common/notify_remove_tag.php"}else var a="https://api.gamer.com.tw/ajax/common/notify_onoff.php";e.ajax({url:a,method:"get",data:{type:o,id:h,onoff:e(u).attr("data-switch")},cache:!1,xhrFields:{withCredentials:!0}}).done(function(p){if(typeof p.error<"u")return"";var r=e(u).attr("data-switch")==1?0:1,n=e("[name=icon_"+o+"_"+h+"]"),t=e("[name=icon2_"+o+"_"+h+"]"),l=e('.list-item-box [name="icon_'+o+"_"+h+'"]'),f=e('.list-item-box [name="icon2_'+o+"_"+h+'"]'),d;if(r==1?(d="on",n.parent("div").removeClass("is-disabled"),t.parent("div").removeClass("is-disabled")):(d="off",n.parent("div").addClass("is-disabled"),t.parent("div").addClass("is-disabled")),i){var g=r==1?"\u79FB\u9664\u6A19\u8A18":"\u5DF2\u79FB\u9664\u6A19\u8A18";n.attr("data-switch",r).html('<img src="https://i2.bahamut.com.tw/wall-tag-'+d+'.png" title="'+g+'">'),t.attr("data-switch",r).html('<img src="https://i2.bahamut.com.tw/wall-tag-'+d+'.png" style="width:16px; height:16px;" title="'+g+'">'),(l.length!=0||f.length!=0)&&(l.html('<img src="https://i2.bahamut.com.tw/wall-tag-'+d+'.png" style="width:16px; height:16px;" title="'+g+'"/>'+g),f.html('<img src="https://i2.bahamut.com.tw/wall-tag-'+d+'.png" style="width:16px; height:16px;" title="'+g+'"/>'+g))}else{var g=r==1?"\u505C\u6B62\u9019\u5247\u901A\u77E5":"\u958B\u555F\u9019\u5247\u901A\u77E5";n.attr("data-switch",r).html('<img src="https://i2.bahamut.com.tw/sound-'+d+'.svg?_=1" title="'+g+'">'),t.attr("data-switch",r).html('<img src="https://i2.bahamut.com.tw/sound-'+d+'.svg?_=1" style="width:16px;" title="'+g+'">'),(l.length!=0||f.length!=0)&&(l.html('<img src="https://i2.bahamut.com.tw/sound-'+d+'.svg" style="width:16px;" title="'+g+'"/>'+g),f.html('<img src="https://i2.bahamut.com.tw/sound-'+d+'.svg" style="width:16px;" title="'+g+'"/>'+g))}})}};c.bahaNotification=s})(jQuery,window);function topNotify_follow(e,c,m,s,o,h){User.Login.requireLogin()&&(c=c||"checked",m=m||"checked",s=s||"checked",o=o||"checked",h=h||"checked",new Dialogify('<input id="c1" type="checkbox" value="1" '+c+'/>\u53ED\u5566\u53ED\u5566<input style="margin-left:15px" id="c2" type="checkbox" value="2" '+m+'/>\u54C8\u5566\u5340\u767C\u8868<input style="margin-left:15px" id="c3" type="checkbox" value="4" '+s+'/>\u5C0F\u5C4B\u767C\u8868<br><br><input id="c4" type="checkbox" value="16" '+o+'/>\u4ED6\u7684\u63A8\u85A6<input style="margin-left:15px" id="c5" type="checkbox" value="32" '+h+"/>\u5BE6\u6CC1\u983B\u9053").title("\u8FFD\u8E64\u52D5\u614B").buttons([{text:"\u78BA\u5B9A",type:Dialogify.BUTTON_PRIMARY,click:function(u){var i=0;jQuery("#c1").is(":checked")&&(i=i|jQuery("#c1").val()),jQuery("#c2").is(":checked")&&(i=i|jQuery("#c2").val()),jQuery("#c3").is(":checked")&&(i=i|jQuery("#c3").val()),jQuery("#c4").is(":checked")&&(i=i|jQuery("#c4").val()),jQuery("#c5").is(":checked")&&(i=i|jQuery("#c5").val()),getCSRFToken().done(function(a){jQuery.ajax({url:"https://api.gamer.com.tw/ajax/common/home_follow_add.php",method:"POST",data:{who:e,v:i,token:a},xhrFields:{withCredentials:!0}}).done(function(p){Dialogify.alert(p)})})}}]).showModal())}var BH_AlkasooD=function(e){function c(t){var l=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];return l[t]}function m(t){if(t=="-")return-1;var l=t.charCodeAt(0);return l>=48&&l<=57?l-=48:l>=65&&l<=90?l-=55:l>=97&&l<=122?l-=61:l=-1,l}function s(t,l,f){var d=25,g=t||"",v;if(t=="")for(v=0;v<d;v++)g+="-";return g=g.substring(0,l)+c(f)+g.substring(l+1),escape(g)}var o=Cookies.get("ckBahaAd"),h=!1,u=!1,i={};e("a.a-mercy-d").each(function(){var t=e(this).data("mercy");if(t){var l=t.split(":");l[0]&&l[1]&&(l[0]=parseInt(l[0],10),l[1]=parseInt(l[1],10),o=s(o,l[0],l[1]),h=!0)}var f=e(this).data("si");if(f){var l=f.split(":"),d=l[0];if(typeof l[1]<"u"){var g=l[1].split(",");e.each(g,function(w,y){var b=y.split("_");e.extend(!0,i,JSON.parse('{"'+d+'":{"'+b[0]+'":"'+b[1]+'"}}')),u=!0})}}});var a=new Date,p=new Date(a.getFullYear(),a.getMonth(),a.getDate(),23,59,59);if(u){var r=Cookies.get("ckBAHAADS");if(!r)Cookies.set("ckBAHAADS",JSON.stringify(i),{expires:p,path:"/",domain:".gamer.com.tw"});else{var n=JSON.parse(r);e.extend(!0,n,i),Cookies.set("ckBAHAADS",JSON.stringify(n),{expires:p,path:"/",domain:".gamer.com.tw"})}}h&&Cookies.set("ckBahaAd",o,{expires:p,path:"/",domain:".gamer.com.tw"})};(function(e,c){var m=function(s){this._options={resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:2,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;"},this._var={bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},s!==c&&this.setOption(s);var o=this,h=function(){setTimeout(function(){o._var.bait===null&&o._creatBait(),setTimeout(function(){o._check()},1)},1)};e.addEventListener!==c?e.addEventListener("load",h,!1):e.attachEvent("onload",h)};m.prototype._options=null,m.prototype._var=null,m.prototype._bait=null,m.prototype.setOption=function(s){for(var o in s)this._options[o]=s[o];return this},m.prototype._creatBait=function(){var s=document.createElement("div");s.setAttribute("class",this._options.baitClass),s.setAttribute("style",this._options.baitStyle),this._var.bait=e.document.body.appendChild(s),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth},m.prototype._destroyBait=function(){e.document.body.removeChild(this._var.bait),this._var.bait=null},m.prototype._check=function(s){if(s===c&&(s=!0),this._var.checking===!0)return!1;this._var.checking=!0,this._var.bait===null&&this._creatBait();var o=this;return this._var.loopNumber=0,s===!0&&(this._var.loop=setInterval(function(){o._checkBait(s)},this._options.loopCheckTime)),setTimeout(function(){o._checkBait(s)},1),!0},m.prototype._checkBait=function(s){var o=!1;if(this._var.bait===null&&this._creatBait(),(e.document.body.getAttribute("abp")!==null||this._var.bait.offsetParent===null||this._var.bait.offsetHeight==0||this._var.bait.offsetLeft==0||this._var.bait.offsetTop==0||this._var.bait.offsetWidth==0||this._var.bait.clientHeight==0||this._var.bait.clientWidth==0)&&(o=!0),e.getComputedStyle!==c){var h=e.getComputedStyle(this._var.bait,null);h&&(h.getPropertyValue("display")=="none"||h.getPropertyValue("visibility")=="hidden")&&(o=!0)}s===!0&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),o===!0?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),s===!0&&(this._var.checking=!1)):(this._var.loop===null||s===!1)&&(this._destroyBait(),this.emitEvent(!1),s===!0&&(this._var.checking=!1))},m.prototype._stopLoop=function(s){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0},m.prototype.emitEvent=function(s){var o=this._var.event[s===!0?"detected":""];for(var h in o)o.hasOwnProperty(h)&&o[h]();return this._options.resetOnEnd===!0&&this.clearEvent(),this},m.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[]},m.prototype.on=function(s,o){return this._var.event[s===!0?"detected":"notDetected"].push(o),this},m.prototype.onDetected=function(s){return this.on(!0,s)},m.prototype.onNotDetected=function(s){return this.on(!1,s)},e.AntiAdB=m,e.antiadb===c&&(e.antiadb=new m({resetOnEnd:!0}))})(window),function(e,c,m){"use strict";var s=c.TopBar||{},o=Cookies.get("BAHAID");if(o&&(o=o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")),s.render=function(i){var a="",p=e(".TOP-my");if(o){if(typeof jQuery().slick!="function"){let t=document.createElement("script");t.type="text/javascript",t.src="https://i2.bahamut.com.tw/js/plugins/slick-1.9.0.min.js",document.getElementsByTagName("head")[0].append(t);let l=document.createElement("link");l.type="text/css",l.rel="stylesheet",l.href="https://i2.bahamut.com.tw/css/plugins/slick.css",document.getElementsByTagName("head")[0].append(l)}var r=User.Login.getAvatarUrl();a+="<ul>",a+='<li class="mobilehide"><a id="topBar_mailbox" href="https://mailbox.gamer.com.tw/"><span class="text-tooltip">\u7AD9\u5167\u4FE1</span><img src="https://i2.bahamut.com.tw/top_icon3.png"></a></li>',a+=`<li class="mobilehide"><a id="topBar_forum" href="javascript:TopBar.showMenu('forum', '')"><span class="text-tooltip">\u6211\u7684\u770B\u677F\u53CA\u516C\u6703</span><img src="https://i2.bahamut.com.tw/top_icon4.png"></a></li>`,a+='<li><a class="topbar_member-home" href="https://home.gamer.com.tw/homeindex.php" data-gtm="\u52C7\u8005\u982D\u50CF"><span class="text-tooltip">\u6211\u7684\u5C0F\u5C4B</span><div class="nav-member_imgbox"><img src="'+r+`" /></div></a><a id="topBar_member" class="topbar_member mobilehide" href="javascript:TopBar.showMenu('member', 'topbar_member')"><i class="fa fa-angle-down"></i><span class="text-tooltip">\u52C7\u8005\u6377\u5F91</span></a></li>`,a+=`<li><a id="topBar_more" style="font-size:11px;" href="javascript:TopBar.showMenu('more', '')"><img src="https://i2.bahamut.com.tw/menu.gif"></a></li>`,a+="</ul>",a+="</div>",p.html(a),a="",a+='<p class="TOP-btn">',a+=`<a href="javascript:TopBar.showMenu('light_0', 'topb1', ' topbnow1 topbnow')" id="topBar_light_0" class="topb1" data-tooltiptext="\u901A\u77E5"><span class="text-tooltip">\u901A\u77E5</span></a>`,a+=`<a href="javascript:TopBar.showMenu('light_1', 'topb2 mobilehide', ' topbnow2 topbnow')" id="topBar_light_1" class="topb2 mobilehide" data-tooltiptext="\u8A02\u95B1"><span class="text-tooltip">\u8A02\u95B1</span></a>`,a+=`<a href="javascript:TopBar.showMenu('light_2', 'topb3 mobilehide', ' topbnow3 topbnow')" id="topBar_light_2" class="topb3 mobilehide" data-tooltiptext="\u63A8\u85A6"><span class="text-tooltip">\u63A8\u85A6</span></a>`,a+=`<a href="javascript:TopBar.showMenu('hahamut', 'topb4')" id="topBar_hahamut" class="topb4" style="display:none" data-tooltiptext="\u804A\u5929"><span class="text-tooltip">\u804A\u5929</span></a>`,a+="</p>",a+='<div id="topBar_search" class="mobileshow nav-search">',a+='<div class="nav-search-button topb5" style="display: block;" onclick="TopBar.showSearchBar();">',a+='<i class="nav-search-icon"></i>',a+="</div>",a+="</div>",a+='<div id="topBarMsg_forum" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_guild" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_light_0" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_light_1" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_light_2" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_member" style="display:none" class="TOP-msg"></div>',a+='<div id="topBarMsg_hahamut" style="display:none" class="TOP-msg"></div>',e(a).insertAfter(p)}else p.addClass("TOP-nologin"),a+='<a href="https://user.gamer.com.tw/login.php"><img src="https://i2.bahamut.com.tw/none.gif"></a>',a+="<ul>",a+='<li><a href="https://user.gamer.com.tw/login.php">\u6211\u8981\u767B\u5165</a></li>',a+='<li><a href="https://user.gamer.com.tw/regS1.php?click_name=\u5168\u7AD9\u5929\u8A3B\u518A&service_name='+c.location.host.split(".")[0]+'">\u8A3B\u518A</a></li>',a+=`<li><a id="topBar_more" style="font-size:11px;" href="javascript:TopBar.showMenu('more', '')"><img src="https://i2.bahamut.com.tw/menu.gif"></a></li>`,a+="</ul>",a+="</div>",p.html(a),a="",a+='<div id="topBar_search" class="mobileshow nav-search">',a+='<div class="nav-search-button topb5" style="display: block;" onclick="TopBar.showSearchBar();">',a+='<i class="nav-search-icon"></i>',a+="</div>",a+="</div>",e(a).insertAfter(p);var n=e("#BH-menu-path");n.length>0?n.addClass("box-shadow__soft"):e(".TOP-bh").addClass("box-shadow__soft"),e("body").click(function(t){e(t.target).parents(".TOP-btn,.TOP-my,.TOP-msg").length||s.closeMenu()})},s.getNotifyNumber=function(){this.getNotificationNumber()},s.showSearchBar=function(){e("#js-SearchForm").fadeIn("normal"),e(".nav-search-button").fadeOut("normal")},s.hideSearchBar=function(){e("#js-SearchForm").fadeOut("normal"),e(".nav-search-button").fadeIn("normal")},s.showMenu=function(i,a,p=" topbnow"){let r=e("#topBar_"+i),n=e("#topBarMsg_"+i);if(n.css("display")=="none")if(this.closeMenu(),r.addClass(a+p+" is-open"),n.css("display","block"),n.html()==""||r.html().substr(0,6)=="<span>"||i=="hahamut")if(i=="more"){let t="";t+='<!--[if (IE 7)|(IE 8)]><style type="text/css">.TOP-msglist{ max-height:450px;}</style><![endif]-->',t+='<div class="TOP-msglist TOP-more" id="topBarMsgList_more"><!--\u5217\u8868\u958B\u59CB-->',o&&(t+='<div class="mobileshow mobile-top_other">',t+="<p>\u52C7\u8005\u6377\u5F91</p>",t+="<ul>",t+='<li><a href="https://home.gamer.com.tw/notifylist.php?owner='+o+'&t=B"><i class="fa fa-rss-square"></i>\u6211\u7684\u8A02\u95B1</a></li>',t+='<li><a href="https://home.gamer.com.tw/notifylist.php?owner='+o+'&t=C"><i class="fa fa-thumbs-up"></i>\u6211\u7684\u63A8\u85A6</a></li>',t+='<li><a href="https://forum.gamer.com.tw/myBoard.php"><i class="fa fa-tags"></i>\u6211\u7684\u770B\u677F</a></li>',t+='<li><a href="https://home.gamer.com.tw/joinGuild.php"><i class="fa fa-tags"></i>\u6211\u7684\u516C\u6703</a></li>',t+='<li><a href="https://mailbox.gamer.com.tw/"><i class="fa fa-envelope"></i>\u6211\u7684\u4FE1\u7BB1</a></li>',t+='<li><a href="https://home.gamer.com.tw/bookmark.php?owner='+o+'"><i class="fa fa-bookmark"></i>\u6211\u7684\u6536\u85CF</a></li>',t+='<li><a href="https://home.gamer.com.tw/acgbox.php?owner='+o+'"><i class="fa fa-heart"></i>\u6211\u7684\u8FFD\u8E64</a></li>',t+='<li><a href="https://avatar1.gamer.com.tw/wardrobe.php"><i class="fa fa-archive"></i>\u6211\u7684\u8863\u6AC3</a></li>',t+='<li><a href="https://user.gamer.com.tw/editProfile_ssl.php"><i class="fa fa-user"></i>\u6703\u54E1\u8CC7\u6599</a></li>',t+='<li><a href="https://home.gamer.com.tw/homeSecuritySet.php"><i class="fa fa-lock"></i>\u5E33\u865F\u5B89\u5168</a></li>',t+='<li><a href="https://home.gamer.com.tw/setting.php"><i class="fa fa-cog"></i>\u504F\u597D\u8A2D\u5B9A</a></li>',t+="</ul>",t+="</div>"),t+="<div>",t+="<p>\u7AD9\u4E0A\u670D\u52D9</p>",t+="<ul>",t+='<li><a href="//gnn.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-gnn.svg">GNN\u65B0\u805E</a></li>',t+='<li><a href="//forum.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-forum.svg">\u54C8\u5566\u5340</a></li>',t+='<li><a href="javascript:;" onclick="LiteTop.openChat()" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-now.svg">Now!</a></li>',t+='<li><a href="//wall.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-wall.svg">\u52D5\u614B\u7246</a></li>',t+='<li><a href="//gnn.gamer.com.tw/gamecrazy.php" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-gamecrazy.svg">\u96FB\u73A9\u760B</a></li>',t+='<li><a href="//ani.gamer.com.tw/" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-ani.svg">\u52D5\u756B\u760B</a></li>',t+='<li><a href="//home.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-creat.svg">\u5275\u4F5C\u5927\u5EF3</a></li>',t+='<li><a href="//home.gamer.com.tw/liveindex.php" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-live.svg">\u5BE6\u6CC1\u5927\u5EF3</a></li>',t+='<li><a href="//guild.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-guild.svg">\u516C\u6703\u5927\u5EF3</a></li>',t+='<li><a href="//avatar1.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-avatar.svg">\u52C7\u8005\u9020\u578B</a></li>',t+='<li><a href="//buy.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-buy.svg">\u5DF4\u54C8\u5546\u57CE</a></li>',t+='<li><a href="//hd.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-hardware.svg">\u5DF4\u54C8\u96FB\u786C\u9928</a></li>',t+='<li><a href="//fuli.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-fuli.svg">\u52C7\u8005\u798F\u5229\u793E</a></li>',t+='<li><a href="//prj.gamer.com.tw/app2u/bahaapp.html" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-bh.svg">\uFF21\uFF30\uFF30</a></li>',t+='<li><a href="//prj.gamer.com.tw/acgaward" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-prj.svg">ACG\u5275\u4F5C\u5927\u8CFD</a></li>',t+='<li><a href="//user.gamer.com.tw" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-user.svg">\u6703\u54E1\u4E2D\u5FC3</a></li>',t+='<li><a href="//user.gamer.com.tw/help/tellus.php" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-qa.svg">\u554F\u984C\u56DE\u5831</a></li>',t+='<li><a href="//home.gamer.com.tw/sticker_store.php" data-gtm="\u670D\u52D9\u5165\u53E3"><img src="https://i2.bahamut.com.tw/nav-stickers.svg">\u8CBC\u5716\u5546\u5E97</a></li>',t+="</ul>",t+="</div>",t+='<div class="nav-platform">',t+="<p>\u5E73\u53F0\u5C08\u5340</p>",t+="<ul>",t+='<li class="platform-android"><a href="//acg.gamer.com.tw/android"><i class="fa fa-android" aria-hidden="true"></i>Android</a></li>',t+='<li class="platform-apple"><a href="//acg.gamer.com.tw/ios"><i class="fa fa-apple" aria-hidden="true"></i>iOS</a></li>',t+='<li class="platform-ns"><a href="//acg.gamer.com.tw/switch">Switch</a></li>',t+='<li class="platform-ps"><a href="//acg.gamer.com.tw/ps5">PS5</a></li>',t+='<li class="platform-ps"><a href="//acg.gamer.com.tw/ps4">PS4</a></li>',t+='<li class="platform-olg"><a href="//acg.gamer.com.tw/online">PC \u7DDA\u4E0A</a></li>',t+='<li class="platform-pc"><a href="//acg.gamer.com.tw/pc">PC \u55AE\u6A5F</a></li>',t+='<li class="platform-web"><a href="//acg.gamer.com.tw/web">Web</a></li>',t+='<li class="platform-xbox"><a href="//acg.gamer.com.tw/xboxsx">XboxSX</a></li>',t+='<li class="platform-ac"><a href="//acg.gamer.com.tw/anime">\u52D5\u756B</a></li>',t+='<li class="platform-ac"><a href="//acg.gamer.com.tw/comic">\u6F2B\u756B</a></li>',t+='<li class="platform-ac"><a href="//acg.gamer.com.tw/lightnovel">\u8F15\u5C0F\u8AAA</a></li>',t+="</ul>",t+="</div>",t+="</div><!--\u5217\u8868\u7D50\u675F-->",o&&(t+='<p class="TOP-msgbtn mobileshow"><a href="https://user.gamer.com.tw/logout.php"><i class="fa fa-sign-out" aria-hidden="true"></i>\u767B\u51FA</a></p>'),r.addClass("topbnow_arrow"),n.addClass("TOP-msg").html(t)}else i=="hahamut"?(r.html(`<span class="text-tooltip">${r.data("tooltiptext")}</span>`),n.html(`
                <span>\u5DF4\u54C8\u59C6\u7279 Now! - \u6211\u7684\u804A\u5929\u5217\u8868</span>
                <div class="TOP-msglist im_top-sort" id="topBarHahamut">
                    <div class="im_system-msg empty-default" style="display:none;">
                        <img class="system-hintimg" src="https://i2.bahamut.com.tw/now/qdg-nothing-grey.png" >
                        <span>\u804A\u5929\u983B\u9053\u7A7A\u7A7A\u5982\u4E5F......<br>\u52A0\u5165\u983B\u9053\u958B\u59CB\u804A\u5929\u5427\uFF01</span>
                    </div>
                    <div class="im_system-msg list-loading">
                        <img class="loading-pixeltext" src="https://i2.bahamut.com.tw/now/loading-pixeltext.gif">
                    </div>
                </div>
                <p class="TOP-msgbtn">
                    <a id="im_friend_apply" href="https://home.gamer.com.tw/profile/friend_list.php"><i
                            class="material-icons im_bhtop">group</i>\u597D\u53CB</a>
                    <a href="https://now.gamer.com.tw/" target="_blank"><i class="material-icons im_bhtop">
                        get_app</i>\u4E0B\u8F09Now! APP</a>
                </p>
            `),setTimeout(function(){LiteTop.initChatList(),LiteTop.cleanNotify()},0),r.addClass("topbnow_arrow"),n.css("display","block")):e.ajax({url:"https://api.gamer.com.tw/ajax/common/topBar.php",data:{type:i},method:"GET",xhrFields:{withCredentials:!0}}).done(function(t){let l="";switch(i){case"forum":if(n.css({"max-width":"835px",width:"200px"}),t){let v=(c.innerWidth>0?c.innerWidth:screen.width)<=1024?635:835,w=4,y={415:5,635:7,645:8,835:10};if(!t.match(/<div class="empty-item">/i)){let b=t.match(/<a href="(?:https?:)?\/\/forum\.gamer\.com\.tw\/A\.php/gi).length,_=b<=20?415:Math.ceil(b/10)*215;_=_<v?_:v,n.css("width",`${_}px`),w=y[_]}l=`
                              <link href="https://i2.bahamut.com.tw/css/guild_create_dialogify.css" rel="stylesheet" type="text/css">
                              <link href="https://i2.bahamut.com.tw/css/plugins/dialogify_insertpic.css" rel="stylesheet" type="text/css">
                              <link href="https://i2.bahamut.com.tw/css/plugins/cropper-1.5.11.min.css" rel="stylesheet" type="text/css">
                              <script src="https://i2.bahamut.com.tw/js/guild.js"><\/script>
                              <script type="text/javascript" src="https://i2.bahamut.com.tw/js/plugins/dropzone.min.js"><\/script>
                              <script type="text/javascript" src="https://i2.bahamut.com.tw/js/plugins/cropper-1.5.11.min.js"><\/script>
                              <script type="text/javascript" src="https://i2.bahamut.com.tw/js/plugins/truth_image.js"><\/script>
                              <span>\u6211\u7684\u5DF4\u54C8\u793E\u7FA4<div onclick="guildSliderShow(event)" class="nav_toggle" id="guild_slider_toggle"><i class="fa fa-minus-square-o" aria-hidden="true"></i> \u96B1\u85CF\u516C\u6703</div></span>
                              <div class="TOP-msglist TOP-board" id="topBarMsgList_${i}">${t}</div>
                              <p class="TOP-msgbtn">
                                  <a href="https://home.gamer.com.tw/setting/forum_edit_board.php" target="_blank">\u7DE8\u8F2F/\u522A\u9664\u770B\u677F</a><a href="//forum.gamer.com.tw">\u524D\u5F80\u54C8\u5566\u5340</a><a href="//guild.gamer.com.tw">\u524D\u5F80\u516C\u6703\u5927\u5EF3</a>
                              </p>
                              <style>.slick-disabled {display: none !important;}</style>
                              <script>
                                  jQuery(".guild_slider").slick({
                                      dots: false, arrows: true, infinite: false, speed: 300,
                                      slidesToShow: ${w}, slidesToScroll: ${w}
                                  });
                                  function guildSliderShow(event) {
                                    if (event !== undefined) event.stopPropagation();
                                    if (jQuery('#guild_slider').is(":hidden")) {
                                      jQuery('#guild_slider').show();
                                      // set whatever option make slick reflash
                                      jQuery(".guild_slider").slick('slickSetOption', 'speed', 300, true);
                                      jQuery('#guild_slider_toggle').html('<i class="fa fa-minus-square-o" aria-hidden="true"></i> \u96B1\u85CF\u516C\u6703');
                                      Cookies.set('ck_guildSliderHide', 'false', {expires: 365, path: '/', domain:'.gamer.com.tw'});
                                      return;
                                    }
                                    jQuery('#guild_slider').hide();
                                    jQuery('#guild_slider_toggle').html('<i class="fa fa-plus-square-o" aria-hidden="true"></i> \u986F\u793A\u516C\u6703');
                                    Cookies.set('ck_guildSliderHide', 'true', {expires: 365, path: '/', domain:'.gamer.com.tw'});
                                  }
                                  if (Cookies.get('ck_guildSliderHide') === 'true') {
                                    guildSliderShow();
                                  }
                              <\/script>
                              `}break;case"member":l=t;break;case"light_0":case"light_1":case"light_2":r.html(`<span class="text-tooltip">${r.data("tooltiptext")}</span>`);let f="",d="";switch(i){case"light_0":f="\u901A\u77E5",d="A",c.Bahamut&&c.Bahamut.NotificationNotice&&new Bahamut.NotificationNotice(0).titleNotice().faviconNotice();break;case"light_1":f="\u8A02\u95B1",d="B";break;case"light_2":f="\u63A8\u85A6",d="C";break}l="<span>"+f+'</span><!--[if (IE 7)|(IE 8)]><style type="text/css">.TOP-msglist{ max-height:450px;}</style><![endif]--><div class="TOP-msglist" id="topBarMsgList_'+i+'">'+t+'</div><p class="TOP-msgbtn"><a href="//home.gamer.com.tw/notifylist.php?owner='+Cookies.get("BAHAID")+"&t="+d+'"><i class="fa fa-bars" aria-hidden="true"></i>\u770B\u6240\u6709\u901A\u77E5</a></p>',c.dataLayer&&c.dataLayer.push({event:"all_click","data-gtm-service":"notice","data-gtm-click":"\u9EDE\u64CA\u901A\u77E5","data-gtm-var1":c.location.href,"data-gtm-area":"\u5929\u901A\u77E5"});break}n.html(l),h.port1.postMessage({action:"syncTab",data:{type:i,html:l}}),r.addClass("topbnow_arrow"),n.css("display","block")});else{if(i=="forum"){let t=200,f=(c.innerWidth>0?c.innerWidth:screen.width)<=1024?635:835;if(!n.html().match(/<div class="empty-item">/i)){let d=n.html().match(/<a href="(?:https?:)?\/\/forum\.gamer\.com\.tw\/A\.php/gi).length;t=d<=20?415:Math.ceil(d/10)*215,t=t<f?t:f}n.css({"max-width":"835px",width:`${t}px`}),jQuery(".guild_slider").slick("slickSetOption","speed",300,!0)}r.addClass("topbnow_arrow"),n.css("display","block")}else this.closeMenu()},s.syncTab=function(i){let a=["light_0","light_1","light_2","hahamut"],p=e("#topBar_"+i.type),r=e("#topBarMsg_"+i.type);r.html(i.html),a.includes(i.type)&&p.html(""),i.type=="light_0"&&c.Bahamut&&c.Bahamut.NotificationNotice&&new Bahamut.NotificationNotice(0).titleNotice().faviconNotice(),r.css("display")==="none"&&p.removeClass(function(n,t){return(t.match(/topbnow[0-3]/g)||[]).join(" ")})},s.closeMenu=function(){e(".TOP-btn a.is-open,.TOP-my a.is-open").removeClass(function(i,a){return(a.match(/(topbnow(_arrow|[0-4])?|topbtn[0-3]now)/g)||[]).join(" ")}).removeClass("is-open"),e("div.TOP-msg").css("display","none")},s.showNotificationNumber=function(i=[0,0,0]){const a=[" topbnow1"," topbnow2 mobilehide"," topbnow3 mobilehide"],p=[" topb1"," topb2 mobilehide"," topb3 mobilehide"];c.Bahamut&&c.Bahamut.NotificationNotice&&new Bahamut.NotificationNotice(i[0]).titleNotice().faviconNotice();for(let r=0,n=i.length;r<=n;r++){let t=e("#topBar_light_"+r),l=e("#topBarMsg_light_"+r);i[r]>0?t.addClass("topb"+(r+1)+a[r]).html(`<span>${i[r]}</span><span class="text-tooltip">${t.data("tooltiptext")}</span>`):l.css("display")==="none"&&t.removeClass().addClass("topb"+(r+1+p[r])).html(`<span class="text-tooltip">${t.data("tooltiptext")}</span>`)}},s.getNotificationNumber=function(){o&&h.port1.postMessage({action:"getNotificationNumber"})},o){var h=new MessageChannel,u=document.createElement("iframe");u.src="https://api.gamer.com.tw/worker/top_bar.html?v=2022111501",u.onload=function(){this.contentWindow.postMessage("BahamutTopBarInit","https://api.gamer.com.tw",[h.port2])},h.port1.onmessage=function(i){i.data.action==="ping"&&h.port1.postMessage({action:"pong",data:i.data.data}),typeof s[i.data.action]=="function"&&s[i.data.action](i.data.data)},u.style.display="none",document.body.appendChild(u)}c.TopBar=s}(jQuery,window);